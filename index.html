<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test1</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        /* CSS code remains unchanged from your initial code */
        /* Copy your original CSS here */
    </style>
</head>
<body>
    <div id="profile" class="profile" style="padding: 20px;">
        <h1 class="profile-title">Profile</h1>
        <div class="profile-header">
            <div class="profile-picture" id="profile-picture"></div>
            <div class="profile-info">
                <div class="profile-name" id="profile-name">Loading...</div>
                <div class="profile-username" id="profile-username">Loading...</div>
                <div class="Balance" style="font-size: 14px; font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;" id="balance">Balance: Loading...</div>
            </div>
        </div>
        <div class="profile-stats">
            <div class="stat-item" id="followers">0 Followers</div>
            <div class="stat-item" id="likes">0 Likes</div>
        </div>
        <script type="module">
            // Import Firebase SDKs
            import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
            import { getDatabase, ref, get, set } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-database.js";

            // Firebase Configuration
            const firebaseConfig = {
                apiKey: "AIzaSyDqcjZilD6TNsIBpwd0A2obdepUO9d88uY",
                authDomain: "zerox-2c22d.firebaseapp.com",
                databaseURL: "https://zerox-2c22d-default-rtdb.firebaseio.com",
                projectId: "zerox-2c22d",
                storageBucket: "zerox-2c22d.firebasestorage.app",
                messagingSenderId: "1076284261548",
                appId: "1:1076284261548:web:fcc52a0597b3933f1b8b09",
                measurementId: "G-RYFTN1ZPGS"
            };

            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const database = getDatabase(app);

            // Simulate fetching user data (e.g., from Telegram)
            const userData = {
                username: "@niloythedmc",
                name: "Niloy Gazi",
                profilePic: "https://via.placeholder.com/80" // Placeholder for profile picture
            };

            // Function to fetch or set user data
            async function fetchOrSetUserData() {
                const userRef = ref(database, `users/${userData.username}`);
                
                try {
                    const snapshot = await get(userRef);
                    if (snapshot.exists()) {
                        const data = snapshot.val();
                        updateProfile(data);
                    } else {
                        // Set default data for new user
                        const defaultData = {
                            name: userData.name,
                            profilePic: userData.profilePic,
                            balance: 20,
                            followers: 0,
                            likes: 0
                        };
                        await set(userRef, defaultData);
                        updateProfile(defaultData);
                    }
                } catch (error) {
                    console.error("Error fetching or setting user data:", error);
                }
            }

            // Update the DOM with user data
            function updateProfile(data) {
                document.getElementById("profile-name").textContent = data.name;
                document.getElementById("profile-username").textContent = userData.username;
                document.getElementById("balance").textContent = `Balance: ${data.balance} $dogs`;
                document.getElementById("followers").textContent = `${data.followers} Followers`;
                document.getElementById("likes").textContent = `${data.likes} Likes`;

                const profilePicElement = document.getElementById("profile-picture");
                profilePicElement.style.backgroundImage = `url(${data.profilePic})`;
            }

            // Initialize on page load
            document.addEventListener("DOMContentLoaded", fetchOrSetUserData);
        </script>
    </div>
</body>
</html>
